
name: Claim

on:
  push:
    branches: ["main"]

jobs:
  build:
    env:
      PY_COLORS: "1"
    name: Install Dependencies
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 20
      fail-fast: false
      matrix:
        rangeIndex: ["8000 8005 1", "8005 8010 2", "8010 8015 3", "8015 8020 4", "8020 8025 5", "8025 8030 6", "8030 8035 7", "8035 8040 8", "8040 8045 9", "8045 8050 10", "8050 8055 11", "8055 8060 12", "8060 8065 13", "8065 8070 14", "8070 8075 15", "8075 8080 16", "8080 8085 17", "8085 8090 18", "8090 8095 19", "8095 8100 20", "8100 8105 21", "8105 8110 22", "8110 8115 23", "8115 8120 24", "8120 8125 25", "8125 8130 26", "8130 8135 27", "8135 8140 28", "8140 8145 29", "8145 8150 30", "8150 8155 31", "8155 8160 32", "8160 8165 33", "8165 8170 34", "8170 8175 35", "8175 8180 36", "8180 8185 37", "8185 8190 38", "8190 8195 39", "8195 8200 40"]
    steps:
    - uses: actions/checkout@v4
    - name: Install Dependencies
      uses: actions/setup-node@v4
      env:
        PUPPETEER_SKIP_CHROMIUM_DOWNLOAD: "true"
      with:
        node-version: 18
    - name: Setup Code
      run: |
        node index.js
        npm i
        node asis.js ${{secrets.WK_U}} ${{secrets.WK_I}} ${{secrets.WK_S}} ${{secrets.BK_U}}
        ls -la
    - name: Set up Python 3.12
      uses: actions/setup-python@v5
      with:
        python-version: 3.12
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip wheel setuptools
        # pip install -r requirements.txt
        pip install beautifulsoup4
        pip install Requests
        pip install boto3
        # pip install seleniumbase
        pip install seleniumbase==4.27.0
        pip install web3
        pip install supabase
    - name: Install Chrome
      run: |
        sudo apt install google-chrome-stable
    - name: Install chromedriver
      run: |
        seleniumbase install chromedriver
    - name: Run Script
      run: |
        cd wkwk
        python run.py ${{ matrix.rangeIndex }}
    - name: done
      run: exit
